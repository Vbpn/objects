<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Object references and copying</title>
</head>
<body>
  <script>
    /*
    let a = {};
    let b = a; // copy the reference

    alert( a == b ); // true, both variables reference the same object
    alert( a === b ); // true

    let a = {};
    let b = {}; // two independent objects

    alert( a == b ); // false
    */

    /*cloning objects*/

    let user0 = {
      name: "John",
      age: 30,
      dims: {weight: 50, height: 100}
    };
    /*ways to clone an object*/
    let clone0 = Object.assign({}, user0);
    let clone1 =  JSON.parse( JSON.stringify(user0) ); //works for nested, but has limitations
    let clone2 =  {...user0};

    clone0.age*=2;
  //  clone0["dims"]["weight"]++;
    clone1.age++;
    clone1["dims"]["weight"]++;
    clone2.age--;
  //  clone2["dims"]["weight"]++;

    console.log(user0);
    console.log(clone0);
    console.log(clone1);
    console.log(clone2);


    let user = {
      name: "John",
      sizes: {
        height: 182,
        width: 50
      }
    };

    let clone = Object.assign({}, user);

    console.log( user.sizes === clone.sizes ); // true, same object

    // user and clone share sizes
    user.sizes.width++;       // change a property from one place
    console.log(clone.sizes.width); // 51, see the result from the other one

    /*
    function isObject(obj) {
      var type = typeof obj;
      return type === 'function' || type === 'object' && !!obj;
    };
    function iterationCopy(src) {
      let target = {};
      for (let prop in src) {
        if (src.hasOwnProperty(prop)) {
          // if the value is a nested object, recursively copy all it's properties
          if (isObject(src[prop])) {
            target[prop] = iterationCopy(src[prop]);
          } else {
            target[prop] = src[prop];
          }
        }
      }
      return target;
    }
    */

  </script>

</body>
</html>
